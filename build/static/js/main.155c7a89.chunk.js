(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{157:function(e,t,s){},181:function(e,t,s){"use strict";s.r(t);var n=s(2),c=s(33),i=s.n(c),r=s(30),a=s.n(r),o=s(12),u=s(31),l=s(34),d=s.n(l),j=s(37),b=s(36),h=s(5),O=(s(151),s(29)),m="INVENTORY/CHANGE_MONEY",p="INVENTORY/CHANGE_HOUSE",f="INVENTORY/CHANGE_PEOPLE",x="INVENTORY/CHANGE_ROKET",g="INVENTORY/SET_INVENTORY",v={money:0,house:0,people:0,roket:0},y=function(e){return{type:m,change:e}},k=function(e){return{type:p,change:e}},I=function(e){return{type:f,change:e}},N=function(e){return{type:x,change:e}},S=function(e,t){var s="";switch(e){case m:s=y;break;case p:s=k;break;case f:s=I;break;case x:s=N}return function(e){e(s(t))}},E="USERS/SET_FRIENDS",P="USERS/SET_USER",q={user:null,friends:null},A=s(182),_=s(3),C=Object(O.b)((function(e){return{money:e.inventoryPage.money,user:e.usersInfo.user}}))((function(e){return Object(_.jsxs)(_.Fragment,{children:[e.backButton?Object(_.jsx)(h.l,{left:Object(_.jsx)(h.m,{onClick:e.go,"data-to":e.backButton}),children:e.headerName}):Object(_.jsx)(h.l,{children:e.headerName}),e.user&&Object(_.jsx)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"Your profile"}),children:Object(_.jsx)(h.g,{before:e.user.photo_200?Object(_.jsx)(h.c,{src:e.user.photo_200}):null,description:e.user.city&&e.user.city.title?e.user.city.title:"",after:Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"black"},children:[e.money,Object(_.jsx)(A.a,{width:30,height:30})]}),children:"".concat(e.user.first_name," ").concat(e.user.last_name)})})]})})),w=function(e){var t=e.id,s=e.go;e.fetchedUser;return Object(_.jsxs)(h.k,{id:t,children:[Object(_.jsx)(C,{headerName:"Home"}),Object(_.jsx)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"Navigation"}),children:Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",mode:"secondary",onClick:s,"data-to":"base",children:"BASE"})})})]})},T=(s.p,s(157),function(e,t){ie.database().ref(String(e)).update(t)}),D=function(e){return ie.database().ref(String(e)).get()},U=function(e){var t=e.id,s=e.go;return Object(_.jsxs)(h.k,{id:t,children:[Object(_.jsx)(C,{go:s,headerName:"Base",backButton:"home"}),Object(_.jsxs)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"Navigation"}),children:[Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",onClick:s,"data-to":"inventory",children:"Inventory"})}),Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",onClick:s,"data-to":"friends",children:"Friends"})}),Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",onClick:s,"data-to":"actionNavigator",children:"Action"})})]})]})},M=s(185),R=s(184),B=s(183),z=30,F=30,H=Object(O.b)((function(e){return{money:e.inventoryPage.money,roket:e.inventoryPage.roket,house:e.inventoryPage.house,people:e.inventoryPage.people,init:e.auth.init}}))((function(e){var t=e.id,s=e.go,n=e.money,c=e.roket,i=e.house,r=e.people;return Object(_.jsxs)(h.k,{id:t,children:[Object(_.jsx)(C,{go:s,headerName:"Inventory",backButton:"base"}),Object(_.jsx)(h.i,{onClick:s,"data-to":"moneyDesc",children:Object(_.jsxs)(h.o,{children:[Object(_.jsx)(h.j,{mode:"secondary",children:"Money"}),Object(_.jsxs)(h.h,{children:[Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[n,Object(_.jsx)(A.a,{width:z,height:F})]}),"  "]})]})}),Object(_.jsx)(h.i,{onClick:s,"data-to":"roketDesc",children:Object(_.jsxs)(h.o,{children:[Object(_.jsx)(h.j,{mode:"secondary",children:"Roket"}),Object(_.jsxs)(h.h,{children:[Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[c,Object(_.jsx)(B.a,{width:z,height:F})]}),"  "]})]})}),Object(_.jsx)(h.i,{onClick:s,"data-to":"houseDesc",children:Object(_.jsxs)(h.o,{children:[Object(_.jsx)(h.j,{mode:"secondary",children:"House"}),Object(_.jsx)(h.h,{children:Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[i,Object(_.jsx)(R.a,{width:z,height:F})]})})]})}),Object(_.jsx)(h.i,{onClick:s,"data-to":"peopleDesc",children:Object(_.jsxs)(h.o,{children:[Object(_.jsx)(h.j,{mode:"secondary",children:"People"}),Object(_.jsx)(h.h,{children:Object(_.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[r,Object(_.jsx)(M.a,{width:z,height:F})]})})]})})]})})),V=function(e){var t=e.id,s=e.go,n=e.friends.map((function(e){return Object(_.jsx)(h.e,{children:Object(_.jsx)("img",{style:{width:"100%",height:"200px"},src:e.photo_200_orig})},e.id)}));return Object(_.jsxs)(h.k,{id:t,children:[Object(_.jsx)(C,{go:s,headerName:"Friends",backButton:"base"}),Object(_.jsx)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"Your Friends"}),children:Object(_.jsx)(h.f,{size:"s",children:n})})]})},K=(s(158),function(e){var t=e.changeInventory,s=e.go,n=e.id,c=function(e){t(m,e)};return Object(_.jsxs)(h.k,{id:n,children:[Object(_.jsx)(C,{go:s,headerName:"Action Navigator",backButton:"base"}),Object(_.jsxs)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"Your actions"}),children:[Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",onClick:function(){return c(-10)},children:"Building"})}),Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",onClick:function(e){t(x,-1),s(e)},"data-to":"attack",children:"Attack"})}),Object(_.jsx)(h.h,{children:Object(_.jsx)(h.d,{stretched:!0,size:"l",onClick:function(){return c(-10)},children:"Defense"})})]})]})}),Y=function(e){var t=e.friends.map((function(e){return Object(_.jsx)(h.e,{children:Object(_.jsx)("div",{children:Object(_.jsx)("img",{style:{width:"100%",height:"200px"},src:e.photo_200_orig})})},e.id)}));return Object(_.jsx)(h.i,{children:Object(_.jsx)(h.i,{children:Object(_.jsx)(h.f,{size:"s",children:t})})})},G=function(e){e.friends;return Object(_.jsx)(h.i,{})},W=function(e){var t=e.go,s=e.id,c=e.friends,i=Object(n.useState)("friends"),r=Object(b.a)(i,2),a=r[0],o=r[1];return Object(_.jsxs)(h.k,{id:s,children:[Object(_.jsx)(C,{go:t,headerName:"Attack",backButton:"actionNavigator"}),Object(_.jsxs)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"Attack"}),children:[Object(_.jsxs)(h.p,{children:[Object(_.jsx)(h.q,{selected:"friends"===a,onClick:function(){o("friends")},children:"friends"}),Object(_.jsx)(h.q,{selected:"other"===a,onClick:function(){o("other")},children:"\u0414\u0440\u0443\u0433\u0438\u0435"})]}),"friends"===a&&Object(_.jsx)(Y,{friends:c}),"other"===a&&Object(_.jsx)(G,{})]})]})},L=function(e){return function(t){var s=t.id,n=t.go;return Object(_.jsxs)(h.k,{id:s,children:[Object(_.jsx)(C,{go:n,headerName:e.what,backButton:"inventory"}),Object(_.jsx)(h.i,{header:Object(_.jsx)(h.j,{mode:"secondary",children:"decription"}),children:Object(_.jsx)(h.h,{children:e.desc})})]})}},J="AUTH/SET_INIT_SUCCESS",Q="AUTH/SET_ACCESS_TOKEN",X={init:!1,accessToken:null},Z=7903112,$=Object(O.b)((function(e){return{money:e.inventoryPage.money,roket:e.inventoryPage.roket,house:e.inventoryPage.house,people:e.inventoryPage.people,friends:e.usersInfo.friends,user:e.usersInfo.user,init:e.auth.init}}),{changeInventory:S,setFriends:function(e){return{type:E,friends:e}},setUser:function(e){return{type:P,user:e}},setInitSuccess:function(){return{type:J}},getDbInventory:function(e){return function(){var t=Object(j.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D(e.id).then((function(e){var t=e.val();t&&Object.keys(t).map((function(e){switch(e){case"money":s(S(m,t.money));break;case"roket":s(S(x,t.roket));break;case"house":s(S(p,t.house));break;case"people":s(S(f,t.people))}}))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setAccessToken:function(e){return{type:Q,token:e}}})((function(e){var t=Object(n.useState)("base"),s=Object(b.a)(t,2),c=s[0],i=s[1],r=Object(n.useState)(Object(_.jsx)(h.n,{size:"large"})),l=Object(b.a)(r,2),O=l[0],m=l[1];Object(n.useEffect)((function(){function t(){return(t=Object(j.a)(d.a.mark((function t(){var s,n,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.send("VKWebAppGetUserInfo");case 2:return s=t.sent,e.setUser(s),t.next=6,a.a.send("VKWebAppGetAuthToken",{app_id:Z,scope:"friends,status"});case 6:return n=t.sent,e.setAccessToken(n.access_token),t.next=10,a.a.send("VKWebAppCallAPIMethod",{method:"friends.get",params:{fields:"nickname,photo_200_orig",v:"5.131",access_token:n.access_token}});case 10:return c=t.sent,e.setFriends(c.response.items),t.next=14,e.getDbInventory(s);case 14:m(null),e.setInitSuccess();case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}a.a.subscribe((function(e){var t=e.detail,s=t.type,n=t.data;if("VKWebAppUpdateConfig"===s){var c=document.createAttribute("scheme");c.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(c)}})),function(){t.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){var t;e.init&&T(e.user.id,(t={},Object(u.a)(t,"money",e.money),Object(u.a)(t,"roket",e.roket),Object(u.a)(t,"house",e.house),Object(u.a)(t,"people",e.people),t))}));var p=function(e){i(e.currentTarget.dataset.to)},f=L({what:"Money",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor mauris quis massa ultrices, ultricies viverra urna pretium. Pellentesque a sem arcu. Donec quis aliquam neque. Mauris at arcu facilisis, porta nunc ac, porttitor diam. Sed lectus dui, sagittis sit amet mollis sed, mollis non arcu. Nam posuere tortor metus, id viverra eros consectetur a. Phasellus sit amet vestibulum augue. Phasellus non turpis iaculis, ultrices elit non, lacinia mi. Ut interdum ante lacus, et volutpat purus tempor sit amet. Morbi fringilla leo nulla, a luctus nulla dapibus quis. Fusce facilisis maximus urna, ac faucibus tortor.Money"}),x=L({what:"People",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor mauris quis massa ultrices, ultricies viverra urna pretium. Pellentesque a sem arcu. Donec quis aliquam neque. Mauris at arcu facilisis, porta nunc ac, porttitor diam. Sed lectus dui, sagittis sit amet mollis sed, mollis non arcu. Nam posuere tortor metus, id viverra eros consectetur a. Phasellus sit amet vestibulum augue. Phasellus non turpis iaculis, ultrices elit non, lacinia mi. Ut interdum ante lacus, et volutpat purus tempor sit amet. Morbi fringilla leo nulla, a luctus nulla dapibus quis. Fusce facilisis maximus urna, ac faucibus tortor.People"}),g=L({what:"House",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor mauris quis massa ultrices, ultricies viverra urna pretium. Pellentesque a sem arcu. Donec quis aliquam neque. Mauris at arcu facilisis, porta nunc ac, porttitor diam. Sed lectus dui, sagittis sit amet mollis sed, mollis non arcu. Nam posuere tortor metus, id viverra eros consectetur a. Phasellus sit amet vestibulum augue. Phasellus non turpis iaculis, ultrices elit non, lacinia mi. Ut interdum ante lacus, et volutpat purus tempor sit amet. Morbi fringilla leo nulla, a luctus nulla dapibus quis. Fusce facilisis maximus urna, ac faucibus tortor.House"}),v=L({what:"Roket",desc:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. In porttitor mauris quis massa ultrices, ultricies viverra urna pretium. Pellentesque a sem arcu. Donec quis aliquam neque. Mauris at arcu facilisis, porta nunc ac, porttitor diam. Sed lectus dui, sagittis sit amet mollis sed, mollis non arcu. Nam posuere tortor metus, id viverra eros consectetur a. Phasellus sit amet vestibulum augue. Phasellus non turpis iaculis, ultrices elit non, lacinia mi. Ut interdum ante lacus, et volutpat purus tempor sit amet. Morbi fringilla leo nulla, a luctus nulla dapibus quis. Fusce facilisis maximus urna, ac faucibus tortor.Roket"});return Object(_.jsx)(h.a,{children:Object(_.jsx)(h.b,{children:Object(_.jsxs)(h.r,{activePanel:c,popout:O,children:[Object(_.jsx)(w,Object(o.a)(Object(o.a)({},e),{},{id:"home",go:p})),Object(_.jsx)(U,Object(o.a)(Object(o.a)({},e),{},{id:"base",go:p})),Object(_.jsx)(H,{id:"inventory",go:p}),Object(_.jsx)(V,Object(o.a)(Object(o.a)({},e),{},{id:"friends",go:p})),Object(_.jsx)(K,Object(o.a)(Object(o.a)({},e),{},{id:"actionNavigator",go:p})),Object(_.jsx)(W,Object(o.a)(Object(o.a)({},e),{},{id:"attack",go:p})),Object(_.jsx)(f,Object(o.a)(Object(o.a)({},e),{},{id:"moneyDesc",go:p})),Object(_.jsx)(x,Object(o.a)(Object(o.a)({},e),{},{id:"peopleDesc",go:p})),Object(_.jsx)(g,Object(o.a)(Object(o.a)({},e),{},{id:"houseDesc",go:p})),Object(_.jsx)(v,Object(o.a)(Object(o.a)({},e),{},{id:"roketDesc",go:p}))]})})})})),ee=s(40),te=s(62),se=Object(ee.b)({inventoryPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(o.a)(Object(o.a)({},e),{},{money:e.money+t.change});case p:return Object(o.a)(Object(o.a)({},e),{},{house:e.house+t.change});case f:return Object(o.a)(Object(o.a)({},e),{},{people:e.people+t.change});case x:return Object(o.a)(Object(o.a)({},e),{},{roket:e.roket+t.change});case g:return t.setInventory;default:return e}},usersInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(o.a)(Object(o.a)({},e),{},{friends:t.friends});case P:return Object(o.a)(Object(o.a)({},e),{},{user:t.user});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(o.a)(Object(o.a)({},e),{},{init:!0});case Q:return Object(o.a)(Object(o.a)({},e),{},{accessToken:t.token});default:return e}}}),ne=Object(ee.c)(se,Object(ee.a)(te.a)),ce=s(39);s(180);a.a.send("VKWebAppInit"),ce.a.initializeApp({apiKey:"AIzaSyAaCTI89WAScNMKK-5pzGmt5qcnF50U6aM",authDomain:"users-f9e77.firebaseapp.com",projectId:"users-f9e77",storageBucket:"users-f9e77.appspot.com",messagingSenderId:"730375624460",appId:"1:730375624460:web:e07c070bceaf98b8091b29",measurementId:"G-HR2BM8955Q"}),ce.a.analytics();var ie=t.default=ce.a,re=function(e){i.a.render(Object(_.jsx)(O.a,{store:ne,children:Object(_.jsx)($,{})}),document.getElementById("root"))};re(ne.getState()),ne.subscribe((function(){ne.getState();re()}))}},[[181,1,2]]]);
//# sourceMappingURL=main.155c7a89.chunk.js.map